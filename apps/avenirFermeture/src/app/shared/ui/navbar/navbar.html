<!-- Mobile header (visible on small screens) -->
<header class="mobile-header">
  <button
    mat-icon-button
    type="button"
    (click)="toggleMenu()"
    [attr.aria-expanded]="isOpen()"
    aria-label="Ouvrir le menu"
  >
    <mat-icon aria-hidden="true">menu</mat-icon>
  </button>
  <span class="app-title">Avenir Fermeture</span>
  <button
    mat-icon-button
    type="button"
    (click)="toggleTheme()"
    [attr.aria-label]="theme.isDark() ? 'Passer en mode clair' : 'Passer en mode sombre'"
  >
    <mat-icon aria-hidden="true">{{
      theme.isDark() ? 'light_mode' : 'dark_mode'
    }}</mat-icon>
  </button>
</header>

<!-- Backdrop for off-canvas menu -->
@if (isOpen()) {
  <div class="backdrop" (click)="closeMenu()" aria-hidden="true"></div>
}

<!-- Sidebar navigation -->
<nav class="sidebar" [class.open]="isOpen()" aria-label="Navigation principale">
  <ul class="nav-list">
    @for (item of navItems; track item.route) {
      <li>
        <a
          class="nav-item"
          [routerLink]="item.route"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: item.exact }"
          (click)="onNavigate()"
        >
          <mat-icon aria-hidden="true">{{ item.icon }}</mat-icon>
          <span class="label">{{ item.label }}</span>
        </a>
      </li>
    }
  </ul>

  <!-- Theme toggle in sidebar (desktop) -->
  <div class="sidebar-footer">
    <button
      mat-button
      class="theme-toggle-sidebar"
      type="button"
      (click)="toggleTheme()"
      [attr.aria-label]="theme.isDark() ? 'Passer en mode clair' : 'Passer en mode sombre'"
    >
      <mat-icon aria-hidden="true">{{
        theme.isDark() ? 'light_mode' : 'dark_mode'
      }}</mat-icon>
      <span class="label">{{
        theme.isDark() ? 'Mode clair' : 'Mode sombre'
      }}</span>
    </button>
  </div>
</nav>
