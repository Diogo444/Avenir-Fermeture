// Include theming for Angular Material with `mat.theme()`.
// This Sass mixin will define CSS variables that are used for styling Angular Material
// components according to the Material 3 design spec.
// Learn more about theming and how to use it for your application's
// custom components at https://material.angular.dev/guide/theming
@use '@angular/material' as mat;

// ===== Light Theme (default) =====
html {
  color-scheme: light;
  @include mat.theme(
    (
      color: (
        primary: mat.$azure-palette,
        tertiary: mat.$red-palette,
      ),
      typography: Roboto,
      density: 0,
    )
  );
}

// ===== Dark Theme =====
// Applied automatically via system preference OR manually via .dark-theme class
@media (prefers-color-scheme: dark) {
  html:not(.light-theme) {
    color-scheme: dark;
    @include mat.theme(
      (
        color: (
          primary: mat.$azure-palette,
          tertiary: mat.$red-palette,
          theme-type: dark,
        ),
        typography: Roboto,
        density: 0,
      )
    );
  }
}

// Manual dark theme override
html.dark-theme {
  color-scheme: dark;
  @include mat.theme(
    (
      color: (
        primary: mat.$azure-palette,
        tertiary: mat.$red-palette,
        theme-type: dark,
      ),
      typography: Roboto,
      density: 0,
    )
  );
}

// Manual light theme override - forces light mode even if system prefers dark
html.light-theme {
  color-scheme: light;
  @include mat.theme(
    (
      color: (
        primary: mat.$azure-palette,
        tertiary: mat.$red-palette,
      ),
      typography: Roboto,
      density: 0,
    )
  );
}

body {
  // Set a default background, font and text colors for the application using
  // Angular Material's system-level CSS variables. Learn more about these
  // variables at https://material.angular.dev/guide/system-variables
  background-color: var(--mat-sys-surface);
  color: var(--mat-sys-on-surface);
  font: var(--mat-sys-body-medium);

  // Reset the user agent margin.
  margin: 0;
}

// ===== Custom CSS Variables for Components =====
// Light theme defaults
:root {
  // Card & Surface backgrounds
  --app-card-bg: #ffffff;
  --app-surface-bg: #f5f5f5;
  --app-surface-variant: #fafafa;
  
  // Text colors
  --app-text-primary: #333333;
  --app-text-secondary: #666666;
  --app-text-muted: #64748b;
  --app-heading-color: #1e293b;
  
  // Borders
  --app-border-color: #e2e8f0;
  --app-divider-color: rgba(0, 0, 0, 0.06);
  
  // Shadows
  --app-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
  --app-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  
  // Status colors (these stay mostly the same)
  --app-error-bg: #f8d7da;
  --app-error-text: #721c24;
  --app-error-border: #f5c6cb;
}

// Dark theme overrides
@media (prefers-color-scheme: dark) {
  :root:not(.light-theme) {
    --app-card-bg: #1e293b;
    --app-surface-bg: #0f172a;
    --app-surface-variant: #1e293b;
    
    --app-text-primary: #e2e8f0;
    --app-text-secondary: #94a3b8;
    --app-text-muted: #64748b;
    --app-heading-color: #f1f5f9;
    
    --app-border-color: #334155;
    --app-divider-color: rgba(255, 255, 255, 0.08);
    
    --app-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
    --app-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
    
    --app-error-bg: #450a0a;
    --app-error-text: #fca5a5;
    --app-error-border: #7f1d1d;
  }
}

// Manual dark theme class - applied to html element
html.dark-theme {
  --app-card-bg: #1e293b;
  --app-surface-bg: #0f172a;
  --app-surface-variant: #1e293b;
  
  --app-text-primary: #e2e8f0;
  --app-text-secondary: #94a3b8;
  --app-text-muted: #64748b;
  --app-heading-color: #f1f5f9;
  
  --app-border-color: #334155;
  --app-divider-color: rgba(255, 255, 255, 0.08);
  
  --app-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
  --app-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
  
  --app-error-bg: #450a0a;
  --app-error-text: #fca5a5;
  --app-error-border: #7f1d1d;
}

// Manual light theme class - forces light mode even if system prefers dark
html.light-theme {
  --app-card-bg: #ffffff;
  --app-surface-bg: #f5f5f5;
  --app-surface-variant: #fafafa;
  
  --app-text-primary: #333333;
  --app-text-secondary: #666666;
  --app-text-muted: #64748b;
  --app-heading-color: #1e293b;
  
  --app-border-color: #e2e8f0;
  --app-divider-color: rgba(0, 0, 0, 0.06);
  
  --app-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
  --app-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  
  --app-error-bg: #f8d7da;
  --app-error-text: #721c24;
  --app-error-border: #f5c6cb;
}

html,
body {
  height: 100vh;
  overflow: hidden; /* Empêche le défilement sur le body */
}
body {
  margin: 0;
  font-family: Roboto, 'Helvetica Neue', sans-serif;
}

// Styles for intl-tel-input flags and layout
@import 'intl-tel-input/build/css/intlTelInput.css';
